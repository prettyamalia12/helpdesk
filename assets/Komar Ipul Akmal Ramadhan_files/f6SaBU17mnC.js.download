if (self.CavalryLogger) { CavalryLogger.start_js(["MRAu5"]); }

__d('ImageUtils',['UserAgent_DEPRECATED'],(function a(b,c,d,e,f,g){var h={hasLoaded:function i(j){if(j.naturalWidth!==undefined){return j.complete&&j.width!==0}else if(j.height==20&&j.width==20&&j.complete){return false}else if(j.complete===undefined&&c('UserAgent_DEPRECATED').webkit()<500){var k=new Image();k.src=j.src;return k.complete}return j.complete}};f.exports=h}),null);
__d('PhotosConst',[],(function a(b,c,d,e,f,g){var h={VIEWER_PERMALINK:0,VIEWER_SNOWLIFT:6,VIEWER_VAULTBOX:8,VIEWER_SNOWFLAKE:14,VIEWER_COMPOSER:16,VIEWER_CAROUSEL:19,VIEWER_SPHERICAL:20,VIEWER_PERMALINK_STRING:'permalink',VIEWER_SNOWLIFT_STRING:'snowlift',VIEWER_VAULTBOX_STRING:'vaultbox',VIEWER_CAROUSEL_STRING:'carousel',BULK_EDITOR:3,BULK_EDITOR_REACT:15,EDITOR_MODAL:17,FLASH_UPLOADER:4,HTML5_UPLOADER:10,SIZE_NORMAL:'n',PIC_NORMAL_FBX_SIZE:180,ALBUM_NAME_MAXLEN:65};f.exports=h}),null);
__d('PhotosUtils',['Vector'],(function a(b,c,d,e,f,g){function h(){}Object.assign(h,{getNearestBox:function i(j,k){var l=Infinity,m=null;for(var n in j){var o=j[n];if(o.contains(k)){var p=k.distanceTo(o.getCenter());if(p<l){l=p;m=n}}}return m},absoluteToNormalizedPosition:function i(j,k){var l=c('Vector').getElementPosition(j),m=c('Vector').getElementDimensions(j),n=k.sub(l).mul(100/m.x,100/m.y);n.domain='pure';return n},normalizedToAbsolutePosition:function i(j,k){var l=c('Vector').getElementPosition(j),m=c('Vector').getElementDimensions(j),n=k.mul(m.x/100,m.y/100).add(l);n.domain='document';return n},isFacebox:function i(j){return j.match(/^face:/)},isTag:function i(j){return j.match(/^tag:/)}});f.exports=h}),null);
__d('PhotoViewer',['Bootloader','CSS','DOM'],(function a(b,c,d,e,f,g){function h(){'use strict';this.image=null;this.root=null;this.stream=null}h.prototype.getEventString=function(i){'use strict';var j=this.getEventPrefix();if(j)return j+'.'+i;return null};h.prototype.getImage=function(){'use strict';return this.image};h.prototype.getPosition=function(){'use strict';return this.stream?this.stream.getCursor():null};h.prototype.getRoot=function(){'use strict';return this.root};h.prototype.hiliteAllBoxes=function(){'use strict';c('DOM').scry(this.stageWrapper,'div.tagsWrapper div.faceBox').forEach(function(i){c('CSS').addClass(i,'otherActive')});c('DOM').scry(this.stageWrapper,'div.tagsWrapper div.fbPhotosPhotoTagboxBaseComments').forEach(function(i){c('CSS').addClass(i,'otherActive')})};h.prototype.getEventPrefix=function(){'use strict';return null};h.prototype.getSourceString=function(){'use strict';return null};h.prototype.getVersionConst=function(){'use strict';return null};h.prototype.getViewerSource=function(){'use strict';return null};h.prototype.getViewerSet=function(){'use strict';return null};h.bootstrap=function(i,j){'use strict';c('Bootloader').loadModules(["PhotoSnowlift"],function(k){k.bootstrap(i,j)},'PhotoViewer')};f.exports=h}),null);
__d('SphericalMediaActionNamespaces',[],(function a(b,c,d,e,f,g){'use strict';f.exports={BASE:'BASE',CORE:'CORE',PHOTO:'PHOTO',PHOTO_EDIT:'PHOTO_EDIT',VIEW:'VIEW'}}),null);
__d('SphericalMediaActions',[],(function a(b,c,d,e,f,g){'use strict';f.exports={TURN_ON:'TURN_ON',TURN_OFF:'TURN_OFF',ENABLE_SPHERICAL:'ENABLE_SPHERICAL',DISABLE_SPHERICAL:'DISABLE_SPHERICAL',REQUEST_PHOTO_FAILED:'REQUEST_PHOTO_FAILED',REQUEST_PHOTO:'REQUEST_PHOTO',RECEIVE_PHOTO:'RECEIVE_PHOTO',UPDATE_BASE:'UPDATE_BASE',DRAG_START:'DRAG_START',GYRO_START:'GYRO_START',ZOOM_START:'ZOOM_START',SIGNIFICANT_MOVE:'SIGNIFICANT_MOVE',MOUSE_ANIMATION_START:'MOUSE_ANIMATION_START',MOUSE_ENTER:'MOUSE_ENTER',TAP_HEADING_INDICATOR:'TAP_HEADING_INDICATOR',VIEWPORT_CLICKED:'VIEWPORT_CLICKED',VISIBILITY_CHANGED:'VISIBILITY_CHANGED',UPDATE_DIMENSION:'UPDATE_DIMENSION',UPDATE_INITIAL_FOV:'UPDATE_INITIAL_FOV',UPDATE_INITIAL_VIEWPORT:'UPDATE_INITIAL_VIEWPORT',SETUP_RENDERER:'SETUP_RENDERER',WEBGL_CONTEXT_LOST:'WEBGL_CONTEXT_LOST',WEBGL_INIT_FAILED:'WEBGL_INIT_FAILED',WEBGL_RENDER_FAILED:'WEBGL_RENDER_FAILED',SOURCE_ONLOAD:'SOURCE_ONLOAD',REPLACE_BASE_STATE:'REPLACE_BASE_STATE',UPDATE_CTR_ELEM:'UPDATE_CTR_ELEM',SHOW_FALLBACK:'SHOW_FALLBACK',UPDATE_VIEW:'UPDATE_VIEW',UPDATE_VIEWPORT:'UPDATE_VIEWPORT',UPDATE_FOV:'UPDATE_FOV',UPDATE_VIEWPORT_AND_FOV:'UPDATE_VIEWPORT_AND_FOV',START_ANIMATING:'START_ANIMATING',STOP_ANIMATING:'STOP_ANIMATING',UPDATE_PHOTO_EDIT:'UPDATE_PHOTO_EDIT',CANCEL_EDITING:'CANCEL_EDITING',START_EDITING:'START_EDITING',STOP_EDITING:'STOP_EDITING',UPDATE_PHOTO:'UPDATE_PHOTO',UPDATE_PHOTO_FAILED:'UPDATE_PHOTO_FAILED',UPDATE_PHOTO_DONE:'UPDATE_PHOTO_DONE',UPDATE_RENDERER_PROJECTION_TYPE:108,UPDATE_RENDERER_PROJECTION_TYPE_FAILED:109,UPDATE_RENDERER_PROJECTION_TYPE_DONE:110,RESET_MOUSE_ANIMATION:'RESET_MOUSE_ANIMATION',START_MOUSE_ANIMATION:'START_MOUSE_ANIMATION',STOP_MOUSE_ANIMATION:'STOP_MOUSE_ANIMATION',DISABLE_SPHERICAL_ON_SAVE:'DISABLE_SPHERICAL_ON_SAVE',ENABLE_SPHERICAL_ON_SAVE:'ENABLE_SPHERICAL_ON_SAVE',ENABLE_EDITING:'ENABLE_EDITING',DISABLE_EDITING:'DISABLE_EDITING',TAKE_STATE_SNAPSHOT:'TAKE_STATE_SNAPSHOT',RESTORE_EDIT_STATE_FROM_SNAPSHOT:'RESTORE_EDIT_STATE_FROM_SNAPSHOT',RESTORE_TAGS_STATE_FROM_SNAPSHOT:'RESTORE_TAGS_STATE_FROM_SNAPSHOT',REMOVE_STATE_SNAPSHOT:'REMOVE_STATE_SNAPSHOT',PHOTO_REMOVED:'PHOTO_REMOVED',UPDATE_FILE_URL:'UPDATE_FILE_URL',CANVAS_RESIZE_START:'CANVAS_RESIZE_START',CANVAS_RESIZE_IMG_LOADED:'CANVAS_RESIZE_IMG_LOADED',CANVAS_RESIZE_SUCCESS:'CANVAS_RESIZE_SUCCESS',CANVAS_RESIZE_FAILED:'CANVAS_RESIZE_FAILED',OPEN_TAG_DIALOG:'OPEN_TAG_DIALOG',CLOSE_TAG_DIALOG:'CLOSE_TAG_DIALOG',SAVE_DIALOG_TAGS:'SAVE_DIALOG_TAGS',CANCEL_DIALOG_TAG_CHANGES:'CANCEL_DIALOG_TAG_CHANGES',PHOTO_RENDERER_STATS:'PHOTO_RENDERER_STATS',ENABLE_TAGGING:'ENABLE_TAGGING',DISABLE_TAGGING:'DISABLE_TAGGING',UPDATE_SPATIAL_TAGS:'UPDATE_SPATIAL_TAGS',UPDATE_SPATIAL_TAGS_FROM_COMPOSER:'UPDATE_SPATIAL_TAGS_FROM_COMPOSER',UPDATE_TAG_UNDER_MOUSE:'UPDATE_TAG_UNDER_MOUSE',TAGGING_START:'TAGGING_START',TAGGING_STOP:'TAGGING_STOP',UPDATE_TAG_CLICKED:'UPDATE_TAG_CLICKED',UPDATE_TAGGER:'UPDATE_TAGGER',ENTER_TAGGING_MODE:'ENTER_TAGGING_MODE',EXIT_TAGGING_MODE:'EXIT_TAGGING_MODE',UPDATE_TARGETED_TAG:'UPDATE_TARGETED_TAG',REDIRECT_FROM_CLICKED_TAG:'REDIRECT_FROM_CLICKED_TAG',DELETED_SPATIAL_TAG:'DELETED_SPATIAL_TAG',ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER:'ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER'}}),null);
__d('SphericalMediaBaseActions',['SphericalMediaActionNamespaces','SphericalMediaActions'],(function a(b,c,d,e,f,g){'use strict';f.exports={updateBase:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_BASE,data:i}},dragStart:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').DRAG_START}},gyroStart:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').GYRO_START}},mouseAnimationStart:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').MOUSE_ANIMATION_START}},mouseEnter:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').MOUSE_ENTER}},tapHeadingIndicator:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').TAP_HEADING_INDICATOR}},significantMove:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').SIGNIFICANT_MOVE,data:{view:i}}},viewportClicked:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').VIEWPORT_CLICKED}},visibilityChanged:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').VISIBILITY_CHANGED,data:i}},zoomStart:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').ZOOM_START}},updateDimension:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_DIMENSION,data:{width:i,height:j}}},updateInitialViewport:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_INITIAL_VIEWPORT,data:{initialYaw:i,initialPitch:j}}},updateInitialFOV:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_INITIAL_FOV,data:{initialFov:i}}},setupRenderer:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').SETUP_RENDERER,data:{renderer:i,dt:j}}},webGlInitFailed:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').WEBGL_INIT_FAILED,data:{error:i}}},webGlRenderFailed:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').WEBGL_RENDER_FAILED,data:{error:i,view:j}}},webGlContextLost:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').WEBGL_CONTEXT_LOST}},sourceOnLoad:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').SOURCE_ONLOAD}},replaceBaseState:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').REPLACE_BASE_STATE,data:i}},updateSpatialTags:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_SPATIAL_TAGS,data:i}},updateSpatialTagsFromComposer:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_SPATIAL_TAGS_FROM_COMPOSER,data:i}},updateTagUnderMouse:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_TAG_UNDER_MOUSE,data:i}},updateFileURL:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_FILE_URL,data:i}},canvasResizeStart:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').CANVAS_RESIZE_START}},canvasResizeImgLoaded:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').CANVAS_RESIZE_IMG_LOADED,data:{width:i,height:j}}},canvasResizeSuccess:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').CANVAS_RESIZE_SUCCESS,data:i}},canvasResizeFailed:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').CANVAS_RESIZE_FAILED,data:i}},enableTagging:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').ENABLE_TAGGING}},disableTagging:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').DISABLE_TAGGING}},taggingStart:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').TAGGING_START}},taggingStop:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').TAGGING_STOP}},updateTagClicked:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_TAG_CLICKED,data:i}},updateTagger:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_TAGGER,data:i}},enterTaggingMode:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').ENTER_TAGGING_MODE}},exitTaggingMode:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').EXIT_TAGGING_MODE}},updateTargetedTag:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_TARGETED_TAG,data:i}},redirectFromClickedTag:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').REDIRECT_FROM_CLICKED_TAG}},deletedSpatialTag:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').DELETED_SPATIAL_TAG}},addSpatialTagFromPhotoTagger:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER}},updateCtrElem:function h(i){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').UPDATE_CTR_ELEM,data:{element:i}}},showFallbackUI:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').SHOW_FALLBACK}},requestPhoto:function h(){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').REQUEST_PHOTO}},requestPhotoFailed:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').REQUEST_PHOTO_FAILED,data:{id:i,error:j}}},receivePhoto:function h(i,j){return {namespace:c('SphericalMediaActionNamespaces').BASE,type:c('SphericalMediaActions').RECEIVE_PHOTO,data:j}}}}),null);
__d('ReactComponentRenderer',['React','ReactDOM','warning'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){this.klass=i;this.container=j;this.props={};this.component=null}h.prototype.replaceProps=function(i,j){this.props={};this.setProps(i,j)};h.prototype.setProps=function(i,j){if(this.klass==null)return;Object.assign(this.props,i);var k=c('React').createElement(this.klass,this.props),l=this;c('ReactDOM').render(k,this.container,function(){l.component=this;if(j)j.call(this);})};h.prototype.unmount=function(){c('ReactDOM').unmountComponentAtNode(this.container);this.klass=null};f.exports=h}),null);
__d('SphericalMediaConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={COMP_PHOTO_EDIT_THUMB:'PhotoEditThumbanil',COMP_PHOTO_VIEWER:'PhotoViewer',EDIT_VIEWPORT_SIZE:{width:476,height:476},HI_ALPHA_BG:{start:.2,end:.5},HI_ALPHA_ELEMENT:{start:.5,end:.85},HI_ALPHA_DURATION:400,HI_SIZE_NORMAL:{width:35,height:35,center_radius:2,background_radius:17.5,inner_radius:12,arc_radius:6.3,arc_stroke:5.3,inner_stroke:1,triangle:[2,2.5,5.2],rim_radius:16.8,rim_stroke:1.4},HI_SIZE_FULL:{width:50,height:50,center_radius:3,background_radius:25,inner_radius:17.14,arc_radius:9,arc_stroke:7.57,inner_stroke:1.5,triangle:[2.85,4.29,7.9],rim_radius:24,rim_stroke:2},HI_BLINK_ARC_RAD:Math.PI/6,HI_BLINK_DURATION:400,HI_FADE_OUT_DELAY:1000,MOUSE_EXPOSURE:4000,LOGGER_SURFACES:{newsfeed:'newsfeed',timeline:'timeline',fullpage:'photo_viewer',snowlift:'www_snowlift',composer:'composer',albumComposer:'album_composer',other:'other'},LOGGER_SIGNIFICANT_MOVEMENT_DEGREE:30,LOGGER_SIGNIFICANT_MOVEMENT_MS:1000,GYRO_SLIP_FACTOR:.15,RB_SPRING_FACTOR:25,RB_MAX_SPRING_DEGREE:15,RB_MAX_STRETCH_X_DEGREE:20,RB_MAX_STRETCH_Y_DEGREE:20,RB_FRICTION:.3,TILED_CUBE_FACES:{PLUS_X:2,MINUS_X:0,PLUS_Y:4,MINUS_Y:5,PLUS_Z:3,MINUS_Z:1},TILED_CUBE_TILE_CONTENT_SIZE:510,TILED_CUBE_TILE_PADDING_PIXELS:1,TAG:'tag',TAGGED_FACEBOX:'tagged_facebox',UNTAGGED_FACEBOX:'untagged_facebox',DEFAULT_SPATIAL_TAG_SIZE_DEGREE:10};f.exports=h}),null);